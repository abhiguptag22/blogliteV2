{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'Profile_page',\n  data: function () {\n    return {\n      city: \"\",\n      dob: null,\n      doj: null,\n      joined_on: null,\n      profession: \"\",\n      profile_modal_error: false,\n      user_name: \"\",\n      user_id: null,\n      ucity: \"\",\n      udob: null,\n      uprofession: \"\",\n      changedPic: null,\n      profileImage: null,\n      allPosts: null,\n      noPosts: 1,\n      totalFollowers: \"\",\n      totalFollowing: \"\",\n      showDropdown: false\n    };\n  },\n  methods: {\n    resetModal() {\n      this.ucity = \"\";\n      this.udob = null;\n      this.uprofession = \"\";\n      this.profile_modal_error = false;\n    },\n    handleEdiProfileOk() {\n      if (this.ucity == \"\" || this.udob == null || this.uprofession == \"\") {\n        console.log(this.udob);\n        this.profile_modal_error = true;\n      } else {\n        this.$nextTick(async () => {\n          this.$bvModal.hide('modal-prevent-closing');\n          const pRequest = await fetch(\"http://localhost:5000/updateProfile\", {\n            method: 'POST',\n            body: JSON.stringify({\n              user_id: this.user_id,\n              city: this.ucity,\n              profession: this.uprofession,\n              dob: this.udob\n            }),\n            headers: {\n              \"Content-type\": \"application/json; charset-UTF-8\"\n            }\n          });\n          const pResponse = await pRequest.json();\n          console.log(pResponse);\n          const qRequest = await fetch(`http://localhost:5000/getProfileDetails/${this.user_id}`);\n          const qResponse = await qRequest.json();\n          if (qResponse) {\n            this.city = qResponse.city;\n            this.profession = qResponse.profession;\n            this.dob = qResponse.dob;\n            this.doj = qResponse.doj;\n          }\n        });\n      }\n    },\n    handleHomeLink() {\n      this.$router.push({\n        name: 'home'\n      });\n    },\n    handleLogOut() {\n      localStorage.removeItem('token');\n      this.$router.push({\n        name: 'login'\n      });\n    },\n    toggleDropdown() {\n      this.showDropdown = !this.showDropdown;\n    },\n    handleOk(bvModalEvent) {\n      bvModalEvent.preventDefault();\n      this.handleEdiProfileOk();\n    },\n    changeProfile() {\n      document.getElementById('file').click();\n    },\n    onImageSelected(event) {\n      this.changedPic = event.target.files[0];\n      console.log(this.changedPic);\n      const fd = new FormData();\n      fd.append('image', this.changedPic);\n      fd.append('user_id', this.user_id);\n      fetch(\"http://localhost:5000/profilePicUpload\", {\n        method: \"POST\",\n        body: fd\n      });\n    },\n    followersPage() {\n      this.$router.push({\n        name: 'followers'\n      });\n    },\n    followingPage() {\n      this.$router.push({\n        name: 'following'\n      });\n    }\n  },\n  mounted: async function () {\n    const jRequest = await fetch(\"http://localhost:5000/checkval\", {\n      method: 'POST',\n      body: JSON.stringify({\n        auth_token: localStorage.getItem('token')\n      }),\n      headers: {\n        \"Content-type\": \"application/json; charset-UTF-8\"\n      }\n    });\n    const jResponse = await jRequest.json();\n    if (!jResponse) {\n      console.log(\"login not successful\");\n      this.$router.push({\n        name: 'login'\n      });\n    } else {\n      this.user_name = jResponse[1];\n      this.user_id = jResponse[0];\n      const pRequest = await fetch(`http://localhost:5000/getProfileDetails/${this.user_id}`);\n      const pResponse = await pRequest.json();\n      if (pResponse) {\n        this.city = pResponse.city;\n        this.profession = pResponse.profession;\n        this.dob = pResponse.dob;\n        this.doj = pResponse.doj;\n        this.totalFollowers = pResponse.totalFollowers;\n        this.totalFollowing = pResponse.totalFollowing;\n      }\n    }\n    fetch(`http://localhost:5000/getUserPosts/${this.user_id}`).then(response => response.json()).then(data => {\n      this.allPosts = data;\n      this.noPosts = data.length;\n    }).catch(error => console.log(error));\n    fetch(`http://localhost:5000/loadProfilePic/${this.user_id}`).then(response => response.json()).then(data => {\n      this.profileImage = data.image;\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n};","map":{"version":3,"mappings":";AA0HA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;IAEA;IACAC;MACA;QACAC;QACA;MACA,OACA;QACA;UACA;UACA;YACAC;YACAC;cACAhB;cACAP;cACAI;cACAH;YACA;YACAuB;cACA;YACA;UACA;UACA;UACAH;UAEA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAI;MACA;QAAA3B;MAAA;IACA;IACA4B;MACAC;MACA;QAAA7B;MAAA;IACA;IACA8B;MACA;IACA;IACAC;MACAC;MACA;IAEA;IACAC;MACAC;IACA;IACAC;MACA;MACAZ;MACA;MACAa;MACAA;MACAC;QACAb;QACAC;MACA;IACA;IACAa;MACA;QAAAtC;MAAA;IACA;IACAuC;MACA;QAAAvC;MAAA;IACA;EACA;EACAwC;IACA;MACAhB;MACAC;QACAgB;MACA;MACAf;QACA;MACA;IACA;IACA;IACA;MACAH;MACA;QAAAvB;MAAA;IACA,OACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAqC,4DACAK;MACA;MACA;IACA,GACAC;IAEAN,8DACAK;MACA;IACA,GACAC;MACApB;IACA;EACA;AACA","names":["name","data","city","dob","doj","joined_on","profession","profile_modal_error","user_name","user_id","ucity","udob","uprofession","changedPic","profileImage","allPosts","noPosts","totalFollowers","totalFollowing","showDropdown","methods","resetModal","handleEdiProfileOk","console","method","body","headers","handleHomeLink","handleLogOut","localStorage","toggleDropdown","handleOk","bvModalEvent","changeProfile","document","onImageSelected","fd","fetch","followersPage","followingPage","mounted","auth_token","then","catch"],"sourceRoot":"src/components","sources":["Profile_page.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row\">\r\n            <b-navbar type=\"dark\" class=\"top-nav\">\r\n                <b-navbar-nav class=\"me-auto mx-5\">\r\n                    <b-navbar-brand>Blog Lite</b-navbar-brand>\r\n                    <b-nav-form class=\"mx-5\">\r\n                        <div class=\"d-flex\">\r\n                            <b-form-input class=\"mr-sm-2\" placeholder=\"Search\"></b-form-input>\r\n                            <b-button class=\"mx-2 search\" type=\"submit\">Search</b-button>\r\n                        </div>\r\n                    </b-nav-form>\r\n                </b-navbar-nav>\r\n                <b-navbar-nav class=\"ms-auto mx-5\">\r\n                    <b-nav-item @click=\"handleHomeLink\">Home</b-nav-item>\r\n                    <b-nav-item>Profile</b-nav-item>\r\n                    <b-nav-item-dropdown :text=\"user_name\">\r\n                        <b-dropdown-item>Export as csv</b-dropdown-item>\r\n                        <b-dropdown-item @click=\"handleLogOut\">Log out</b-dropdown-item>\r\n                    </b-nav-item-dropdown>\r\n                </b-navbar-nav>\r\n            </b-navbar>\r\n        </div>\r\n        <div class=\"row d-flex mt-3\">\r\n            <div class=\"col-2\"></div>\r\n            <div class=\"col-3\">\r\n                <div class=\"profile-box shadow-div\">\r\n                    <div class=\"profile-box-photo\">\r\n                        <img :src=\"('data:image/jpg;base64,' + profileImage)\" @click=\"changeProfile\">\r\n                        <input type=\"file\" id=\"file\" @change=\"onImageSelected\">\r\n                    </div>\r\n                    <div>\r\n                        <h4 style=\"display: flex; justify-content:center; margin-top: 10px;\">{{ user_name }}</h4>\r\n                    </div>\r\n                    <hr>\r\n                    <div class=\"edit-profile\">\r\n                        <p v-b-modal.modal-prevent-closing size=\"sm\">Edit Profile</p>\r\n                        <b-modal id=\"modal-prevent-closing\" ref=\"modal\" title=\"Edit your profile\" @show=\"resetModal\"\r\n                            @hidden=\"resetModal\" @ok=\"handleOk\">\r\n                            <form ref=\"edi-profile-form\" @submit.stop.prevent=\"handleEdiProfileOk\">\r\n                                <b-form-group label=\"City\">\r\n                                    <b-form-input id=\"City\" v-model=\"ucity\" required></b-form-input>\r\n                                </b-form-group>\r\n\r\n                                <b-form-group label=\"Profession\">\r\n                                    <b-form-input id=\"profession\" v-model=\"uprofession\" required></b-form-input>\r\n                                </b-form-group>\r\n\r\n                                <b-form-group label=\"Date of Birth\">\r\n                                    <b-form-datepicker id=\"dob-input\" v-model=\"udob\" required\r\n                                        class=\"mb-2\"></b-form-datepicker>\r\n                                </b-form-group>\r\n                            </form>\r\n                            <p v-if=\"profile_modal_error\">Error</p>\r\n\r\n                        </b-modal>\r\n                    </div>\r\n                    <div class=\"profile-data\">\r\n                        <p> <span>City</span>{{ city }}</p>\r\n                        <p><span>Date of Birth</span>{{ dob }}</p>\r\n                        <p><span>Profession</span>{{ profession }}</p>\r\n                        <p><span>Joined On</span>{{ doj }}</p>\r\n\r\n                    </div>\r\n                </div>\r\n                <div class=\"follow-box shadow-div\">\r\n                    <div class=\"followers\">\r\n                        <p @click=\"followersPage\">Followers : {{ totalFollowers }}</p>\r\n                    </div>\r\n                    <div class=\"following\">\r\n                        <p @click=\"followingPage\">Following : {{ totalFollowing }}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-5\">\r\n                <div class=\"myposts shadow-div\">\r\n                    <h4>My Posts</h4>\r\n                    <h6>No. of Posts : {{ noPosts }}</h6>\r\n                </div>\r\n                <div class=\"no-posts\" v-if=\"!noPosts\">There are no posts to show</div>\r\n                <div class=\"feed-item shadow-div\" v-for=\"eachPost in allPosts\" :key=\"eachPost.key\">\r\n                    <div class=\"feed-item-first d-flex\">\r\n                        <img :src=\"('data:image/jpg;base64,' + eachPost.profileImage)\" class=\"feed-prof-img\" alt=\"img\">\r\n                        <div class=\"name-time\">\r\n                            <h4><router-link :to=\"'/profile/' + eachPost.user_id\">{{ eachPost.user_name }}</router-link>\r\n                            </h4>\r\n                            <div class=\"d-flex\">\r\n                                <img class=\"icon\" src=\"../assets/workwise/img/Time_50px.png\">\r\n                                <p class=\"text-muted\" style=\"margin-top: -3px; margin-left: 5px;\">3 mins ago</p>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"three-dot\">\r\n                            <!-- <img src=\"../assets/icons/three-dot.png\" id=\"dropdown-menu\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" type=\"button\">\r\n                             -->\r\n                            <b-dropdown id=\"dropdown-menu\" text=\":\" variant=\"secondary\" no-caret>\r\n                                <b-dropdown-item>Edit</b-dropdown-item>\r\n                                <b-dropdown-item>Remove</b-dropdown-item>\r\n                            </b-dropdown>\r\n                            \r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <p class=\"feed-caption\">{{ eachPost.caption }}</p>\r\n                    </div>\r\n                    <div class=\"feed-img\">\r\n                        <img :src=\"('data:image/jpg;base64,' + eachPost.image)\" alt=\"Image\">\r\n                    </div>\r\n                    <p class=\"feed-caption\">No. of Likes : {{ eachPost.likes }}</p>\r\n                    <div style=\"margin-left:20px; margin-right:20px;\">\r\n                        <hr>\r\n                    </div>\r\n                    <div class=\"feed-like ms-auto\">\r\n                        <img src=\"../assets/workwise/img/Love_52px.png\" alt=\"\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-2\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n    name: 'Profile_page',\r\n    data: function () {\r\n        return {\r\n            city: \"\",\r\n            dob: null,\r\n            doj: null,\r\n            joined_on: null,\r\n            profession: \"\",\r\n            profile_modal_error: false,\r\n            user_name: \"\",\r\n            user_id: null,\r\n            ucity: \"\",\r\n            udob: null,\r\n            uprofession: \"\",\r\n            changedPic: null,\r\n            profileImage: null,\r\n            allPosts: null,\r\n            noPosts: 1,\r\n            totalFollowers: \"\",\r\n            totalFollowing: \"\",\r\n            showDropdown: false,\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        resetModal() {\r\n            this.ucity = \"\"\r\n            this.udob = null\r\n            this.uprofession = \"\"\r\n            this.profile_modal_error = false\r\n\r\n        },\r\n        handleEdiProfileOk() {\r\n            if (this.ucity == \"\" || this.udob == null || this.uprofession == \"\") {\r\n                console.log(this.udob)\r\n                this.profile_modal_error = true\r\n            }\r\n            else {\r\n                this.$nextTick(async () => {\r\n                    this.$bvModal.hide('modal-prevent-closing')\r\n                    const pRequest = await fetch(\"http://localhost:5000/updateProfile\", {\r\n                        method: 'POST',\r\n                        body: JSON.stringify({\r\n                            user_id: this.user_id,\r\n                            city: this.ucity,\r\n                            profession: this.uprofession,\r\n                            dob: this.udob\r\n                        }),\r\n                        headers: {\r\n                            \"Content-type\": \"application/json; charset-UTF-8\"\r\n                        }\r\n                    })\r\n                    const pResponse = await pRequest.json()\r\n                    console.log(pResponse)\r\n\r\n                    const qRequest = await fetch(`http://localhost:5000/getProfileDetails/${this.user_id}`)\r\n                    const qResponse = await qRequest.json()\r\n                    if (qResponse) {\r\n                        this.city = qResponse.city\r\n                        this.profession = qResponse.profession\r\n                        this.dob = qResponse.dob\r\n                        this.doj = qResponse.doj\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        handleHomeLink() {\r\n            this.$router.push({ name: 'home' })\r\n        },\r\n        handleLogOut() {\r\n            localStorage.removeItem('token')\r\n            this.$router.push({ name: 'login' })\r\n        },\r\n        toggleDropdown() {\r\n            this.showDropdown = !this.showDropdown\r\n        },\r\n        handleOk(bvModalEvent) {\r\n            bvModalEvent.preventDefault()\r\n            this.handleEdiProfileOk()\r\n\r\n        },\r\n        changeProfile() {\r\n            document.getElementById('file').click();\r\n        },\r\n        onImageSelected(event) {\r\n            this.changedPic = event.target.files[0]\r\n            console.log(this.changedPic)\r\n            const fd = new FormData()\r\n            fd.append('image', this.changedPic)\r\n            fd.append('user_id', this.user_id)\r\n            fetch(\"http://localhost:5000/profilePicUpload\", {\r\n                method: \"POST\",\r\n                body: fd\r\n            })\r\n        },\r\n        followersPage() {\r\n            this.$router.push({ name: 'followers' })\r\n        },\r\n        followingPage() {\r\n            this.$router.push({ name: 'following' })\r\n        }\r\n    },\r\n    mounted: async function () {\r\n        const jRequest = await fetch(\"http://localhost:5000/checkval\", {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                auth_token: localStorage.getItem('token')\r\n            }),\r\n            headers: {\r\n                \"Content-type\": \"application/json; charset-UTF-8\",\r\n            }\r\n        })\r\n        const jResponse = await jRequest.json()\r\n        if (!jResponse) {\r\n            console.log(\"login not successful\")\r\n            this.$router.push({ name: 'login' })\r\n        }\r\n        else {\r\n            this.user_name = jResponse[1]\r\n            this.user_id = jResponse[0]\r\n            const pRequest = await fetch(`http://localhost:5000/getProfileDetails/${this.user_id}`)\r\n            const pResponse = await pRequest.json()\r\n            if (pResponse) {\r\n                this.city = pResponse.city\r\n                this.profession = pResponse.profession\r\n                this.dob = pResponse.dob\r\n                this.doj = pResponse.doj\r\n                this.totalFollowers = pResponse.totalFollowers\r\n                this.totalFollowing = pResponse.totalFollowing\r\n            }\r\n        }\r\n        fetch(`http://localhost:5000/getUserPosts/${this.user_id}`)\r\n            .then(response => response.json()).then(data => {\r\n                this.allPosts = data\r\n                this.noPosts = data.length\r\n            })\r\n            .catch(error => console.log(error))\r\n\r\n        fetch(`http://localhost:5000/loadProfilePic/${this.user_id}`)\r\n            .then(response => response.json()).then(data => {\r\n                this.profileImage = data.image\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-box {\r\n    width: 315.8px;\r\n    min-height: 375px;\r\n    background-color: white;\r\n    text-align: left;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    margin-top: 60px;\r\n    padding-bottom: 10px;\r\n    position: fixed;\r\n    color: #000038;\r\n}\r\n\r\n.profile-box-photo {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.profile-box-photo img {\r\n    height: 150px;\r\n    border-radius: 50%;\r\n    margin-top: 20px;\r\n    border: 2px solid black;\r\n    padding: 5px;\r\n}\r\n\r\n.edit-profile {\r\n    margin-right: 10px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.edit-profile p {\r\n    font-size: small;\r\n    text-decoration: underline;\r\n}\r\n\r\n.profile-data {\r\n    margin-left: 30px;\r\n}\r\n\r\n.profile-data span {\r\n    display: inline-block;\r\n    width: 40%;\r\n    position: relative;\r\n    padding-right: 10px;\r\n}\r\n\r\n.profile-data span::after {\r\n    content: \":\";\r\n    position: absolute;\r\n    right: 10px;\r\n}\r\n\r\n.follow-box {\r\n    background-color: white;\r\n    width: 315.8px;\r\n    margin-top: 525px;\r\n    height: 100px;\r\n    text-align: left;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    position: fixed;\r\n    color: #000038;\r\n}\r\n\r\n.follow-box :hover {\r\n    background-color: #000038;\r\n    color: white;\r\n    cursor: pointer;\r\n}\r\n\r\n.followers {\r\n    height: 50px;\r\n    text-align: center;\r\n    border-bottom: 1px solid rgb(163, 149, 149);\r\n    padding: 12px;\r\n}\r\n\r\n.following {\r\n    height: 50px;\r\n    text-align: center;\r\n    padding: 12px;\r\n}\r\n\r\n.followers,\r\n.following p {\r\n    font-weight: 200;\r\n}\r\n\r\n.myposts {\r\n    background-color: white;\r\n    display: flex;\r\n    height: 50px;\r\n    width: 654px;\r\n    margin-top: 60px;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.myposts h4 {\r\n    text-align: left;\r\n    margin-left: 20px;\r\n    width: 50%;\r\n}\r\n\r\n.myposts h6 {\r\n    text-align: right;\r\n    margin-right: 20px;\r\n    width: 50%;\r\n}\r\n\r\n.three-dot {\r\n    margin-inline-start: auto;\r\n    margin-top: 20px;\r\n    margin-right: 5px;\r\n}\r\n\r\n.three-dot img {\r\n    height: 35px;\r\n    width: auto;\r\n}\r\n\r\n#dropdown-menu .dropdown-toggle {\r\n    background-color: transparent;\r\n}\r\n\r\n#file {\r\n    display: none;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}